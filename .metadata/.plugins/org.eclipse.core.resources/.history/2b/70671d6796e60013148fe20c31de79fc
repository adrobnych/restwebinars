package com.sysiq.restwebinars.admin_client.model.helpers;

import com.sun.jersey.api.client.Client;
import com.sun.jersey.api.client.ClientResponse;
import com.sun.jersey.api.client.WebResource;

public class ExchangeDispatcher {
	
	private static Client client = null;
	private static WebResource checkRateResource = null;
	private static WebResource setRateResource = null;
	
	private ExchangeDispatcher(){}
	
	public static ExchangeDispatcher createInstance(){
		
		client = Client.create();
		checkRateResource = client.resource("http://localhost:9998/checkrate");
		setRateResource = client.resource("http://localhost:9998/setrate");
		
		return this;
	}

	public void setRate(double rate) {
		String input = 	"<setrate xmlns=\"http://schemas.restexchange.com/setrate\">"+
				"<items>"+
					"<item>"+
						"<from>USD</from>"+
						"<to>UAH</to>"+
						"<factor>" + rate + "</factor>"+
					"</item>"+
				"</items>"+
			"</setrate>";

ClientResponse response = webResource.path("setrate").type("application/xml").post(ClientResponse.class, input);
	}

	public double getRate() {
		// TODO Auto-generated method stub
		return 0;
	}

}
